[0;34mðŸš€ Starting Runtime Application (host mode)...[0m

[0;34mRunning setup checks...[0m
[0;34mðŸš€ Setting up Runtime Application (local mode)...[0m

[0;32mâœ… Project root: /workspaces/pybase[0m
[0;34mChecking Python installation...[0m
[0;32mâœ… Python 3.12 detected[0m

[0;34mChecking uv package manager...[0m
[0;32mâœ… uv is available: uv 0.9.3[0m

[0;34mSetting up virtual environment...[0m
[0;32mâœ… Virtual environment already exists[0m

[0;34mInstalling Emmett framework and dependencies...[0m
[0;32mâœ… Dependencies installed[0m

[0;34mSetting up database...[0m
Applying migrations...
âœ… DatabaseManager initialized: sqlite://bloggy.db
   Pool size: 0 (test mode: False)
âœ— Error tracking unavailable: emmett-sentry not installed
âœ“ Prometheus metrics enabled at /metrics (pipeline-based)
âœ… Registered 8 models with database
INFO: Starting automatic route discovery...
DEBUG: Found 1 BaseModel subclasses
DEBUG: Models: ['Role']
INFO: Scanning 1 BaseModel subclasses for auto_routes...
DEBUG: Checking Role
DEBUG: Role - auto_routes = {'enabled': True, 'rest_api': False}
âœ“ Discovered auto_routes model: Role
INFO: Discovered 1 models with auto_routes
INFO: Found 1 models with auto_routes enabled: ['Role']
INFO: Generating routes for Role at /roles
âœ“ Successfully registered routes for Role
âœ“ Automatic route generation enabled
âœ“ Prometheus metrics enabled at /metrics (pipeline integration)
âœ“ Metrics tracked automatically for all requests via pipeline
> Performing upgrades against sqlite://bloggy.db
[0;32mâœ… Migrations applied[0m

[0;34mSetting up admin user...[0m
âœ… DatabaseManager initialized: sqlite://bloggy.db
   Pool size: 0 (test mode: False)
âœ— Error tracking unavailable: emmett-sentry not installed
âœ“ Prometheus metrics enabled at /metrics (pipeline-based)
âœ… Registered 8 models with database
INFO: Starting automatic route discovery...
DEBUG: Found 1 BaseModel subclasses
DEBUG: Models: ['Role']
INFO: Scanning 1 BaseModel subclasses for auto_routes...
DEBUG: Checking Role
DEBUG: Role - auto_routes = {'enabled': True, 'rest_api': False}
âœ“ Discovered auto_routes model: Role
INFO: Discovered 1 models with auto_routes
INFO: Found 1 models with auto_routes enabled: ['Role']
INFO: Generating routes for Role at /roles
âœ“ Successfully registered routes for Role
âœ“ Automatic route generation enabled
âœ“ Prometheus metrics enabled at /metrics (pipeline integration)
âœ“ Metrics tracked automatically for all requests via pipeline
Admin user already exists!

============================================================
ðŸ” Setting up Role-Based Access Control System
============================================================

============================================================
ðŸŒ± SEEDING ROLE-BASED ACCESS CONTROL SYSTEM
============================================================
ðŸŒ± Seeding permissions...
  âœ“ Permission exists: user.read
  âœ“ Permission exists: user.create
  âœ“ Permission exists: user.edit.own
  âœ“ Permission exists: user.edit.any
  âœ“ Permission exists: user.delete.own
  âœ“ Permission exists: user.delete.any
  âœ“ Permission exists: user.manage
  âœ“ Permission exists: post.read
  âœ“ Permission exists: post.create
  âœ“ Permission exists: post.edit.own
  âœ“ Permission exists: post.edit.any
  âœ“ Permission exists: post.delete.own
  âœ“ Permission exists: post.delete.any
  âœ“ Permission exists: post.publish
  âœ“ Permission exists: comment.read
  âœ“ Permission exists: comment.create
  âœ“ Permission exists: comment.edit.own
  âœ“ Permission exists: comment.edit.any
  âœ“ Permission exists: comment.delete.own
  âœ“ Permission exists: comment.delete.any
  âœ“ Permission exists: comment.moderate
  âœ“ Permission exists: role.read
  âœ“ Permission exists: role.create
  âœ“ Permission exists: role.edit
  âœ“ Permission exists: role.delete
  âœ“ Permission exists: role.assign
  âœ“ Permission exists: permission.read
  âœ“ Permission exists: permission.create
  âœ“ Permission exists: permission.edit
  âœ“ Permission exists: permission.delete
  âœ“ Permission exists: permission.assign
âœ… Seeded 31 permissions

ðŸŒ± Seeding roles...
  âœ“ Role exists: admin
    â†’ Assigned ALL permissions to admin
  âœ“ Role exists: moderator
  âœ“ Role exists: author
  âœ“ Role exists: viewer
âœ… Seeded 4 roles
âœ“ User 1 already has admin role

============================================================
âœ… ROLE SYSTEM SEEDING COMPLETE
============================================================

âœ… Role system setup complete!
   - Created 31 permissions
   - Created 4 roles
   - Assigned Admin role to 1
Admin user created: doc@emmettbrown.com
[0;32mâœ… Admin user created[0m

[0;32mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m
[0;32mðŸŽ‰ Local Setup Complete![0m
[0;32mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m

[0;34mðŸ“‹ Next steps:[0m

1ï¸âƒ£  Start the application:
   [1;33m./run_bloggy.sh --local[0m
   Or:
   [1;33mjust runtime-local[0m
   Or manually:
   [1;33mcd runtime && uv run emmett develop[0m

2ï¸âƒ£  Access the application:
   â€¢ Application: http://localhost:8000/
   â€¢ Login with:
     - Email: doc@emmettbrown.com
     - Password: fluxcapacitor

3ï¸âƒ£  Run tests (coverage enabled by default):
   [1;33m./run_tests.sh[0m
   Or manually:
   [1;33mcd runtime && uv run pytest tests.py[0m

[0;34mðŸ“š About the Runtime Application:[0m
   This is a micro-blogging application built with Emmett framework.
   It demonstrates:
   â€¢ User authentication and authorization
   â€¢ Database models and ORM
   â€¢ Form handling and validation
   â€¢ Template rendering
   â€¢ Admin-only features

[0;34mðŸ“– Emmett Documentation:[0m
   See emmett_documentation/ for comprehensive framework docs

[0;32mHappy coding! ðŸ“[0m


[0;34mValidating Emmett models...[0m
âœ… DatabaseManager initialized: sqlite://bloggy.db
   Pool size: 0 (test mode: True)
âœ— Error tracking unavailable: emmett-sentry not installed
âœ“ Prometheus metrics enabled at /metrics (pipeline-based)
âœ… Registered 8 models with database
INFO: Starting automatic route discovery...
DEBUG: Found 1 BaseModel subclasses
DEBUG: Models: ['Role']
INFO: Scanning 1 BaseModel subclasses for auto_routes...
DEBUG: Checking Role
DEBUG: Role - auto_routes = {'enabled': True, 'rest_api': False}
âœ“ Discovered auto_routes model: Role
INFO: Discovered 1 models with auto_routes
INFO: Found 1 models with auto_routes enabled: ['Role']
INFO: Generating routes for Role at /roles
âœ“ Successfully registered routes for Role
âœ“ Automatic route generation enabled
âœ“ Prometheus metrics enabled at /metrics (pipeline integration)
âœ“ Metrics tracked automatically for all requests via pipeline
================================================================================
Emmett Model Pattern Validation Results
================================================================================

Models checked: 3
Total violations: 7
  âœ— Errors: 0
  âš  Warnings: 7
  â„¹ Info: 0

âš  User: PASS WITH WARNINGS
   Found 7 violation(s): 0 errors, 7 warnings, 0 info

   [SESSION_ACCESS]
     âš  User (line 86)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 87)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 88)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 116)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 117)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 267)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead
     âš  User (line 269)
        Models should not directly access session
        â†’ Pass user/data as method parameters instead

âœ“ Post: PASS (no violations)
âœ“ Comment: PASS (no violations)

âš  Validation passed with 7 warning(s)
[0;32mâœ… Model validation passed[0m

[0;34mBuilding Tailwind CSS...[0m

> bloggy@1.0.0 build:css
> npx @tailwindcss/cli -i ./static/input.css -o ./static/tailwind.css --minify

[0;32mâœ… Tailwind CSS built successfully[0m

[0;32mâœ… Setup complete! Starting development server...[0m

Access the application at: \033[0;32mhttp://localhost:8000\033[0m

Login with:
  Email: \033[1;33mdoc@emmettbrown.com\033[0m
  Password: \033[1;33mfluxcapacitor\033[0m

[0;34mPress Ctrl+C to stop the server[0m

> Starting Emmett development server on app app
> Emmett application app running on http://127.0.0.1:8000 (press CTRL+C to quit)
> Restarting (stat mode)
âœ… DatabaseManager initialized: sqlite://bloggy.db
   Pool size: 0 (test mode: False)
âœ— Error tracking unavailable: emmett-sentry not installed
âœ“ Prometheus metrics enabled at /metrics (pipeline-based)
âœ… Registered 8 models with database
INFO: Starting automatic route discovery...
DEBUG: Found 1 BaseModel subclasses
DEBUG: Models: ['Role']
INFO: Scanning 1 BaseModel subclasses for auto_routes...
DEBUG: Checking Role
DEBUG: Role - auto_routes = {'enabled': True, 'rest_api': False}
âœ“ Discovered auto_routes model: Role
INFO: Discovered 1 models with auto_routes
INFO: Found 1 models with auto_routes enabled: ['Role']
INFO: Generating routes for Role at /roles
âœ“ Successfully registered routes for Role
âœ“ Automatic route generation enabled
âœ“ Prometheus metrics enabled at /metrics (pipeline integration)
âœ“ Metrics tracked automatically for all requests via pipeline
[INFO] Starting granian (main PID: 86845)
[INFO] Listening at: http://127.0.0.1:8000
[INFO] Spawning worker-1 with PID: 86846
[INFO] Started worker-1
[INFO] Started worker-1 runtime-1
[INFO] Shutting down granian
[INFO] Stopping worker-1
[INFO] Stopping worker-1 runtime-1
