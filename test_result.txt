time="2025-10-13T08:18:32+13:00" level=warning msg="/Users/ed.sharood2/code/pybase/docker/docker-compose.yaml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
 Container valkey  Running
üîµ Docker Entrypoint: Starting initialization...
üé® Building Tailwind CSS...
   Removing host node_modules (incompatible binaries)...
   Installing npm packages for Linux...
   Compiling Tailwind CSS...

Done in 76ms
‚úÖ Tailwind CSS built successfully
üóÑÔ∏è  Running database migrations...
‚ö†Ô∏è  Sentry configured but not loaded (template conflict): http://public@bugsink:8000/1
‚úì Prometheus metrics enabled at /metrics (pipeline-based)
‚úì Prometheus metrics enabled at /metrics (pipeline integration)
‚úì Metrics tracked automatically for all requests via pipeline
> Performing upgrades against sqlite:///app/runtime/databases/bloggy.db
> Performing upgrade: <base> -> 9d6518b3cdc2 (head), First migration
> Failed upgrading to 9d6518b3cdc2
Traceback (most recent call last):
  File "/usr/local/bin/emmett", line 8, in <module>
    sys.exit(main())
             ^^^^^^
  File "/usr/local/lib/python3.12/site-packages/emmett/cli.py", line 516, in main
    cli.main(prog_name="python -m emmett" if as_module else None)
  File "/usr/local/lib/python3.12/site-packages/emmett/cli.py", line 226, in main
    return super().main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 1383, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 1850, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 1850, in invoke
    return _process_result(sub_ctx.command.invoke(sub_ctx))
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 1246, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 814, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/decorators.py", line 93, in new_func
    return ctx.invoke(f, obj, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/click/core.py", line 814, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/emmett/cli.py", line 483, in migrations_up
    up(app, dbs, revision, dry_run)
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/commands.py", line 322, in up
    Command(app, dals).up(revision, dry_run)
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/commands.py", line 199, in up
    migration.up()
  File "/app/runtime/migrations/9d6518b3cdc2_first_migration.py", line 17, in up
    self.create_table(
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/helpers.py", line 46, in __call__
    return op.run()
           ^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/operations.py", line 150, in run
    self.engine.create_table(self.table_name, self.columns, self.primary_keys, **self.kw)
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/engine.py", line 97, in create_table
    self._log_and_exec(sql)
  File "/usr/local/lib/python3.12/site-packages/emmett/orm/migrations/engine.py", line 92, in _log_and_exec
    self.adapter.execute(sql)
  File "/usr/local/lib/python3.12/site-packages/pydal/adapters/__init__.py", line 67, in wrap
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.12/site-packages/pydal/adapters/base.py", line 410, in execute
    rv = self.cursor.execute(command, *args[1:], **kwargs)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: table "users" already exists
‚ö†Ô∏è  No migrations to run or migrations failed
‚úÖ Initialization complete!

============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-8.4.2, pluggy-1.6.0
rootdir: /app/runtime
plugins: cov-7.0.0, asyncio-1.2.0, anyio-4.11.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 83 items

tests.py ............................................................... [ 75%]
....................                                                     [100%]

=============================== warnings summary ===============================
tests.py: 40 warnings
  /usr/local/lib/python3.12/site-packages/emmett/ctx.py:31: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return pendulum.instance(datetime.utcnow())

tests.py::test_empty_db
  /usr/local/lib/python3.12/site-packages/emmett_core/protocols/rsgi/test_client/client.py:304: DeprecationWarning: There is no current event loop
    loop = asyncio.get_event_loop()

tests.py: 198 warnings
  /usr/local/lib/python3.12/site-packages/emmett_core/protocols/rsgi/wrappers.py:69: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    self._now = datetime.utcnow()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================= 83 passed, 239 warnings in 2.85s =======================
